{
  "$schema": "../docs/planning/schemas/subtasks.schema.json",
  "metadata": {
    "scope": "milestone",
    "milestoneRef": "002-ralph-ðŸ’ª",
    "generatedWith": "subtasks-from-source-v2.md",
    "note": "Predictability-based sizing - comparison test"
  },
  "subtasks": [
    {
      "id": "SUB-025",
      "taskRef": "TASK-REVIEW-001",
      "storyRef": "STORY-001",
      "title": "Update SKILL.md with all 11 reviewer agents",
      "description": "The parallel-code-review skill documentation lists only 5 reviewers but there are 11 reviewer agents. Update the Reviewer Agents table in SKILL.md to include all 11: security-reviewer, data-integrity-reviewer, error-handling-reviewer, test-coverage-reviewer, maintainability-reviewer, dependency-reviewer, documentation-reviewer, accessibility-reviewer, intent-alignment-reviewer, over-engineering-reviewer, performance-reviewer.",
      "done": false,
      "classification": {
        "knowledgeCertainty": "known-known",
        "spikeIndicators": 0,
        "elementCount": 3,
        "reasoning": "Clear what to do (update table), clear how (add rows), similar tables exist in file"
      },
      "acceptanceCriteria": [
        "SKILL.md Reviewer Agents table contains 11 rows (one per agent)",
        "Each agent row has: name, focus area description",
        "Verify: grep -c 'reviewer' .claude/skills/parallel-code-review/SKILL.md | test $(cat) -ge 11"
      ],
      "filesToRead": [
        ".claude/skills/parallel-code-review/SKILL.md",
        ".claude/agents/code-review/"
      ]
    },
    {
      "id": "SUB-026",
      "taskRef": "TASK-REVIEW-001",
      "storyRef": "STORY-001",
      "title": "Document aaa review command in README.md and tools/CLAUDE.md",
      "description": "Two documentation gaps: (1) README.md CLI Tools section doesn't document aaa review command, (2) tools/CLAUDE.md directory structure doesn't include review/ folder. Add both in one subtask since they're related documentation updates with no code changes.",
      "done": false,
      "classification": {
        "knowledgeCertainty": "known-known",
        "spikeIndicators": 0,
        "elementCount": 4,
        "reasoning": "Clear content to add, patterns exist in both files, no research needed. Merged from findings #3 and #4 - same concern (documentation), both deterministic."
      },
      "acceptanceCriteria": [
        "README.md CLI Tools section documents 'aaa review' with --supervised, --headless, --dry-run flags",
        "README.md documents 'aaa review status' subcommand",
        "tools/CLAUDE.md Directory Structure includes review/ folder with index.ts, types.ts",
        "Verify: grep -q 'aaa review' README.md",
        "Verify: grep -q 'review/' tools/CLAUDE.md"
      ],
      "filesToRead": [
        "README.md",
        "tools/CLAUDE.md",
        "tools/src/commands/review/"
      ]
    },
    {
      "id": "SUB-027",
      "taskRef": "TASK-REVIEW-001",
      "storyRef": "STORY-001",
      "title": "Add error logging and Zod validation to review parsing",
      "description": "Two related error handling improvements in review/index.ts: (1) readDiaryEntries silently returns [] on error - add console.warn matching writeDiaryEntry pattern at line 250, (2) parseReviewFindings uses raw JSON.parse without validation - add Zod schema for Finding[] structure. Both improve error handling in the same file.",
      "done": false,
      "classification": {
        "knowledgeCertainty": "known-known",
        "spikeIndicators": 0,
        "elementCount": 5,
        "reasoning": "Merged findings #6 and #7. Both touch same file, same concern (error handling/validation). Pattern for console.warn exists in file. Zod is standard, Finding type defined in types.ts."
      },
      "acceptanceCriteria": [
        "readDiaryEntries catch block logs warning with chalk.yellow including file path and error message",
        "Pattern matches writeDiaryEntry error handling (lines 250-254)",
        "Zod schema defined for Finding array structure matching types.ts Finding interface",
        "parseReviewFindings uses schema.safeParse() instead of raw JSON.parse",
        "Invalid JSON logs Zod format errors for debugging",
        "Verify: grep -q 'console.warn' tools/src/commands/review/index.ts",
        "Verify: grep -q 'z.object\\|z.array' tools/src/commands/review/index.ts"
      ],
      "filesToRead": [
        "tools/src/commands/review/index.ts",
        "tools/src/commands/review/types.ts"
      ]
    },
    {
      "id": "SUB-028a",
      "taskRef": "TASK-REVIEW-001",
      "storyRef": "STORY-001",
      "title": "Analyze interrogate-review workflow relationship",
      "description": "Research task: The /dev:interrogate command exists alongside the parallel-code-review skill. Determine: (1) What is the purpose of each? (2) Are they currently integrated? (3) When should users use which? Output a documented analysis to inform SUB-028b.",
      "done": false,
      "classification": {
        "knowledgeCertainty": "known-unknown",
        "spikeIndicators": 2,
        "elementCount": 4,
        "reasoning": "Split from finding #12. Original was 'verify and document' which mixes research + implementation. This subtask is research-only with defined output artifact."
      },
      "acceptanceCriteria": [
        "Read and analyzed: .claude/skills/parallel-code-review/SKILL.md",
        "Read and analyzed: .claude/commands/dev/interrogate.md",
        "Read and analyzed: context/workflows/interrogate.md",
        "Output: Analysis documented in completion notes covering: purpose of each, current integration status, recommendation for documentation"
      ],
      "filesToRead": [
        ".claude/skills/parallel-code-review/SKILL.md",
        ".claude/commands/dev/interrogate.md",
        "context/workflows/interrogate.md",
        "docs/planning/VISION.md"
      ]
    },
    {
      "id": "SUB-028b",
      "taskRef": "TASK-REVIEW-001",
      "storyRef": "STORY-001",
      "title": "Document interrogate vs review distinction",
      "description": "Implementation task (blocked by SUB-028a): Based on analysis findings, add documentation clarifying when to use /dev:interrogate vs aaa review. Add section to SKILL.md or VISION.md explaining: interrogate is for questioning decisions in existing code, review is for finding issues in changes.",
      "done": false,
      "blockedBy": ["SUB-028a"],
      "classification": {
        "knowledgeCertainty": "known-known",
        "spikeIndicators": 0,
        "elementCount": 2,
        "reasoning": "After SUB-028a completes, this becomes deterministic: add specific content to specific file based on research findings."
      },
      "acceptanceCriteria": [
        "Documentation added to SKILL.md OR VISION.md (based on SUB-028a recommendation)",
        "Section clearly states: interrogate = questioning decisions, review = finding issues",
        "Section includes guidance on when to use each",
        "Verify: grep -q 'interrogate' in the updated documentation file"
      ],
      "filesToRead": [
        ".claude/skills/parallel-code-review/SKILL.md",
        "docs/planning/VISION.md"
      ]
    }
  ],
  "skippedFindings": [
    {
      "finding": 2,
      "title": "Array bounds check - undefined decision",
      "reason": "FALSE POSITIVE - Line 2532 doesn't exist. File is 871 lines, not 2600+."
    },
    {
      "finding": 5,
      "title": "Null safety - regex match",
      "reason": "FALSE POSITIVE - Line 2415 doesn't exist. File is 871 lines."
    },
    {
      "finding": 8,
      "title": "Simplify threshold calculation",
      "reason": "FALSE POSITIVE - Current severity Ã— confidence implementation is reasonable and well-documented."
    },
    {
      "finding": 9,
      "title": "Split index.ts into modules",
      "reason": "FALSE POSITIVE - File is 871 lines, not 2600+. Not large enough to warrant splitting."
    },
    {
      "finding": 10,
      "title": "Break up runHeadlessReview()",
      "reason": "FALSE POSITIVE - File is manageable at 871 lines. Function refactoring not necessary."
    },
    {
      "finding": 11,
      "title": "Break up runReviewStatus()",
      "reason": "FALSE POSITIVE - File is manageable at 871 lines. Function refactoring not necessary."
    }
  ]
}
